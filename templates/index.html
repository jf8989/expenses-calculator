<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ExpenseSplit Pro</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&family=Roboto+Mono&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <header>
      <div class="header-content container">
        <h1><i class="fas fa-money-bill-wave"></i> ExpenseSplit Pro</h1>
        <button id="logout-btn" class="btn btn-danger">
          <i class="fas fa-sign-out-alt"></i> Sign Out
        </button>
      </div>
    </header>

    <div id="auth-section" class="container section">
      <h2><i class="fas fa-user-lock"></i> Acceso</h2>
      <div id="auth-disclaimer" class="disclaimer">
        <h3>
          <i class="fas fa-info-circle"></i> ¿Por qué necesitamos que te
          registres?
        </h3>
        <p>
          Registration is necessary to offer you the best possible experience
          with ExpenseSplit Pro:
        </p>
        <ul>
          <li>
            Maintain accurate tracking of your transactions and preferences.
          </li>
          <li>Ensure the security and privacy of your financial data.</li>
          <li>Allow you to access your shared expenses from any device.</li>
          <li>
            Offer you personalized analysis and suggestions to optimize your
            shared finances.
          </li>
        </ul>
        <p>
          Your information is safe with us, and we will never share it with
          third parties. By registering, you agree to our terms of service and
          privacy policy.
        </p>
      </div>
      <div class="form-group">
        <input
          type="email"
          id="email"
          class="form-control"
          placeholder="Correo electrónico"
        />
        <input
          type="password"
          id="password"
          class="form-control"
          placeholder="Contraseña"
        />
      </div>
      <div class="btn-group">
        <button id="register-btn" class="btn btn-primary">
          <i class="fas fa-user-plus"></i> Sign Up
        </button>
        <button id="login-btn" class="btn btn-success">
          <i class="fas fa-sign-in-alt"></i> Sign In
        </button>
      </div>
    </div>

    <div id="app-content" class="container" style="display: none">
      <div id="currency-selection" class="section">
        <h2><i class="fas fa-coins"></i> Currency Selection</h2>
        <div class="form-group">
          <label for="main-currency">Primary currency:</label>
          <select id="main-currency" class="form-control"></select>
        </div>
        <div class="form-group">
          <label for="secondary-currency">Secondary currency:</label>
          <select id="secondary-currency" class="form-control"></select>
        </div>
      </div>

      <div id="transactions-input" class="section">
        <h2><i class="fas fa-receipt"></i> Transaction Input</h2>
        <p class="instructions">
          Enter the transactions in the format "DD/MM/YYYY: Description -
          Amount". One transaction per line. The system will try to
          automatically assign the participants.
        </p>
        <div class="form-group">
          <textarea
            id="transactions-text"
            class="form-control"
            rows="5"
            placeholder="15/06/2024: IZI*SERVICE - 97.00&#10;23/06/2024: OPENAI *CHATGPT SUBSCR - 20.00"
          ></textarea>
        </div>
        <button id="add-transactions-btn" class="btn btn-primary">
          <i class="fas fa-plus-circle"></i> Add Transactions
        </button>
      </div>

      <div id="participants-management" class="section">
        <h2><i class="fas fa-users"></i> Participants Management</h2>
        <div class="form-group">
          <input
            type="text"
            id="new-participant"
            class="form-control"
            placeholder="Participant's name"
          />
          <button id="add-participant-btn" class="btn btn-success">
            <i class="fas fa-user-plus"></i> Add
          </button>
        </div>
        <div id="participants-list" class="participants-grid">
          <!-- Los participant-card se agregarán dinámicamente aquí -->
        </div>
      </div>

      <div id="transactions-analysis" class="section">
        <h2><i class="fas fa-chart-bar"></i> Transaction Analysis</h2>
        <p class="instructions">
          Review and assign participants to the transactions. Select multiple
          participants by checking the boxes. Click on the amount to switch
          between currencies.
        </p>
        <div class="btn-group">
          <button id="delete-all-transactions-btn" class="btn btn-danger">
            <i class="fas fa-trash-alt"></i> Delete All
          </button>
          <button id="unassign-all-participants-btn" class="btn btn-warning">
            <i class="fas fa-user-slash"></i> Unassign All
          </button>
        </div>
        <div id="transactions-search" class="form-group">
          <input
            type="text"
            id="transaction-search-input"
            class="form-control"
            placeholder="Filter transactions..."
          />
        </div>
        <div class="table-responsive">
          <table id="transactions-table" class="table">
            <thead>
              <tr>
                <th>#</th>
                <th>Date</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Assigned to</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- Las filas se añadirán dinámicamente -->
            </tbody>
          </table>
        </div>
      </div>

      <div id="session-management" class="section">
        <h2><i class="fas fa-save"></i> Session Management</h2>
        <p class="instructions">
          Save your current state to revisit later. Sessions include transactions and their assignments.
        </p>
      
        <div class="row">
          <div class="col">
            <div class="form-group">
              <input type="text" id="session-name" class="form-control" placeholder="Session name (defaults to today's date)">
            </div>
          </div>
          <div class="col">
            <button id="save-session-btn" class="btn btn-primary">
              <i class="fas fa-save"></i> Save Current State
            </button>
          </div>
        </div>
      
        <div class="saved-sessions-container">
          <h3>Saved Sessions</h3>
          <div class="table-responsive">
            <table id="sessions-table" class="table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Date</th>
                  <th>Transactions</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <!-- Sessions will be added here dynamically -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div id="expenses-summary" class="section">
        <h2><i class="fas fa-file-invoice-dollar"></i> Expenses Summary</h2>
        <div class="table-responsive">
          <table id="summary-table" class="table">
            <thead>
              <tr>
                <th>Participant</th>
                <th>Total (Primary)</th>
                <th>Total (Secondary)</th>
              </tr>
            </thead>
            <tbody>
              <!-- Las filas se añadirán dinámicamente -->
            </tbody>
          </table>
        </div>
        <div id="expense-chart"></div>
      </div>
    </div>

    <div id="loading-indicator" style="display: none">
      <div class="spinner"></div>
    </div>

    <footer class="site-footer">
      <div class="footer-content">
        <div class="footer-section about">
          <h3>About ExpenseSplit Pro</h3>
          <p>
            An advanced tool for calculating and analyzing shared expenses,
            developed with precision and care by JF8989.
          </p>
        </div>
        <div class="footer-section contact">
          <h3>Contact</h3>
          <p><i class="fas fa-envelope"></i> juanfrajf.contacto@gmail.com</p>
        </div>
        <div class="footer-section social">
          <h3>Follow Me</h3>
          <a
            href="https://www.linkedin.com/in/jfmarcenaroa/"
            class="social-icon"
            target="_blank"
            ><i class="fab fa-linkedin"></i
          ></a>
          <a
            href="https://github.com/jf8989?tab=repositories"
            class="social-icon"
            target="_blank"
            ><i class="fab fa-github"></i
          ></a>
        </div>
      </div>
      <div class="footer-bottom">
        <p class="copyright">
          © 2024 JF8989. All rights reserved. This software and its source code
          are protected by copyright laws. No license is granted for its use,
          modification, or distribution without the express written permission
          of the author.
        </p>
      </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  </body>
</html>
